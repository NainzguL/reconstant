# Fork to reconstant

This fork was made to reduce the numbers of dependencies, and match my personnal needs of light environment.
This version is probably a bit less flexible and maybe less error proof than the original one.

It also implement a way to combine constants, using the basic operations (string concatenation, and basic arithmetic functions)

C and Rust files were modified according to what I found on internet, but are not tested (I'm no C/Rust developer at this time).
Java/PHP can use a package/namespace declaration.

# Example

## Create an input file

#### `test.yaml`

```yaml
constants:
  - name: SOME_CONSTANT
    value: 'this is a constant string'
  - name: OTHER_CONSTANT
    value: 42
  - name: CONCAT_PREFIX
    value: 'prefix_'
  - name: CONCAT_SUFFIX
    value: '_suffix'
  - name: CONCAT_CONSTANT
    concat:
      - ref: CONCAT_PREFIX
      - value: 'value'
      - ref: CONCAT_SUFFIX
  - name: NUMBER_BASE
    value: 10
  - name: NUMBER_SUM
    sum:
      - ref: NUMBER_BASE
      - value: 5
  - name: NUMBER_SUB
    sub:
      - ref: NUMBER_BASE
      - value: 5
  - name: NUMBER_MUL
    mul:
      - ref: NUMBER_BASE
      - value: 5
  - name: NUMBER_DIV
    div:
      - ref: NUMBER_BASE
      - value: 5

enums:
  - name: SomeEnum
    values:
      - A
      - B
      - C
  - name: OtherEnum
    values:
      - FOO
      - BAR

outputs:
  c:
    path: autogenerated_examples/constants.h
  dart:
    path: autogenerated_constants.dart
  java:
    path: autogenerated_examples/Constants.java
    package: my.project
  javascript:
    path: autogenerated_examples/constants.js
  php:
    path: autogenerated_examples/constants.php
    namespace: my\project
  python:
    path: autogenerated_examples/constants.py
  rust:
    path: autogenerated_examples/constants.rs
  vue:
    path: autogenerated_examples/vue_constants.js
```

## Install and run reconstant

```
pip install pyyaml
reconstant test.yaml
```

## Generated Output Files

### Python

#### `autogenerated_constants.py`

```python
# autogenerated by reconstant - do not edit!
from enum import Enum

# constants
SOME_CONSTANT = "this is a constant string"
OTHER_CONSTANT = 42
CONCAT_PREFIX = "prefix_"
CONCAT_SUFFIX = "_suffix"
CONCAT_CONSTANT = CONCAT_PREFIX+"value"+CONCAT_SUFFIX
NUMBER_BASE = 10
NUMBER_SUM = NUMBER_BASE+5
NUMBER_SUB = NUMBER_BASE-5
NUMBER_MUL = NUMBER_BASE*5
NUMBER_DIV = NUMBER_BASE/5

# enums
class SomeEnum(Enum):
	A = 0
	B = 1
	C = 2

class OtherEnum(Enum):
	FOO = 0
	BAR = 1

```

### Javascript

#### `autogenerated_constants.js`

```javascript
// autogenerated by reconstant - do not edit!

// constants
export const SOME_CONSTANT = 'this is a constant string';
export const OTHER_CONSTANT = 42;
export const CONCAT_PREFIX = 'prefix_';
export const CONCAT_SUFFIX = '_suffix';
export const CONCAT_CONSTANT = CONCAT_PREFIX + 'value' + CONCAT_SUFFIX;
export const NUMBER_BASE = 10;
export const NUMBER_SUM = NUMBER_BASE + 5;
export const NUMBER_SUB = NUMBER_BASE - 5;
export const NUMBER_MUL = NUMBER_BASE * 5;
export const NUMBER_DIV = NUMBER_BASE / 5;

// enums
export const SomeEnum = {
	A: 0,
	B: 1,
	C: 2,
};
export const OtherEnum = {
	FOO: 0,
	BAR: 1,
};
```

### C/CPP

#### `autogenerated_constants.h`

````c
// autogenerated by reconstant - do not edit!
#ifndef AUTOGENERATED_EXAMPLES_CONSTANTS_H
#define AUTOGENERATED_EXAMPLES_CONSTANTS_H

// constants
const char* SOME_CONSTANT = "this is a constant string";
const int OTHER_CONSTANT = 42;
const char* CONCAT_PREFIX = "prefix_";
const char* CONCAT_SUFFIX = "_suffix";
const char* CONCAT_CONSTANT = CONCAT_PREFIX "value" CONCAT_SUFFIX;
const int NUMBER_BASE = 10;
const int NUMBER_SUM = NUMBER_BASE+5;
const int NUMBER_SUB = NUMBER_BASE-5;
const int NUMBER_MUL = NUMBER_BASE*5;
const int NUMBER_DIV = NUMBER_BASE/5;

// enums
typedef enum { A, B, C } SomeEnum;
typedef enum { FOO, BAR } OtherEnum;

#endif /* AUTOGENERATED_EXAMPLES_CONSTANTS_H */```
````

### Vue Mixins

#### `autogenerated_vue_constants.py`

```js
// autogenerated by reconstant - do not edit!

// constants
export const SOME_CONSTANT = 'this is a constant string';
export const OTHER_CONSTANT = 42;
export const CONCAT_PREFIX = 'prefix_';
export const CONCAT_SUFFIX = '_suffix';
export const CONCAT_CONSTANT = CONCAT_PREFIX + 'value' + CONCAT_SUFFIX;
export const NUMBER_BASE = 10;
export const NUMBER_SUM = NUMBER_BASE + 5;
export const NUMBER_SUB = NUMBER_BASE - 5;
export const NUMBER_MUL = NUMBER_BASE * 5;
export const NUMBER_DIV = NUMBER_BASE / 5;

// enums
export const SomeEnum = {
	A: 0,
	B: 1,
	C: 2,
};

SomeEnum.Mixin = {
	created() {
		this.SomeEnum = SomeEnum;
	},
};
export const OtherEnum = {
	FOO: 0,
	BAR: 1,
};

OtherEnum.Mixin = {
	created() {
		this.OtherEnum = OtherEnum;
	},
};
```

### Java

#### `AutogeneratedConstants.java`

```java
// autogenerated by reconstant - do not edit!
package my.project;

public final class Constants {

	// constants
	public static final String SOME_CONSTANT = "this is a constant string";
	public static final int OTHER_CONSTANT = 42;
	public static final String CONCAT_PREFIX = "prefix_";
	public static final String CONCAT_SUFFIX = "_suffix";
	public static final String CONCAT_CONSTANT = CONCAT_PREFIX+"value"+CONCAT_SUFFIX;
	public static final int NUMBER_BASE = 10;
	public static final int NUMBER_SUM = NUMBER_BASE+5;
	public static final int NUMBER_SUB = NUMBER_BASE-5;
	public static final int NUMBER_MUL = NUMBER_BASE*5;
	public static final int NUMBER_DIV = NUMBER_BASE/5;

	// enums
	public enum SomeEnum {
		A,
		B,
		C
	}
	public enum OtherEnum {
		FOO,
		BAR
	}

}
```

### Rust

#### `autogenerated_constants.rs`

```rust
// autogenerated by reconstant - do not edit!
use const_format::concatcp;

// constants
pub const SOME_CONSTANT: &str = "this is a constant string";
pub const OTHER_CONSTANT: i32 = 42;
pub const CONCAT_PREFIX: &str = "prefix_";
pub const CONCAT_SUFFIX: &str = "_suffix";
pub const CONCAT_CONSTANT: &str = concatcp!(CONCAT_PREFIX,"value",CONCAT_SUFFIX);
pub const NUMBER_BASE: i32 = 10;
pub const NUMBER_SUM: i32 = NUMBER_BASE+5;
pub const NUMBER_SUB: i32 = NUMBER_BASE-5;
pub const NUMBER_MUL: i32 = NUMBER_BASE*5;
pub const NUMBER_DIV: i32 = NUMBER_BASE/5;

// enums
pub enum SomeEnum {
	A,
	B,
	C
}
pub enum OtherEnum {
	FOO,
	BAR
}
```

### Dart

#### `autogenerated_constants.dart`

```dart
// autogenerated by reconstant - do not edit!
library constants;

// constants
const someConstant = "this is a constant string";
const otherConstant = 42;

// enums
enum SomeEnum {
  a,
  b,
  c
}
enum OtherEnum {
  foo,
  bar
}
```

### PHP

#### `autogenerated_constants.php`

```php
<?php
// autogenerated by reconstant - do not edit!
namespace my\project;

// constants
Define('SOME_CONSTANT', 'this is a constant string');
Define('OTHER_CONSTANT', 42);
Define('CONCAT_PREFIX', 'prefix_');
Define('CONCAT_SUFFIX', '_suffix');
Define('CONCAT_CONSTANT', CONCAT_PREFIX . 'value' . CONCAT_SUFFIX);
Define('NUMBER_BASE', 10);
Define('NUMBER_SUM', NUMBER_BASE + 5);
Define('NUMBER_SUB', NUMBER_BASE - 5);
Define('NUMBER_MUL', NUMBER_BASE * 5);
Define('NUMBER_DIV', NUMBER_BASE / 5);

// enums
enum SomeEnum {
	case A;
	case B;
	case C;
}
enum OtherEnum {
	case FOO;
	case BAR;
}
```
